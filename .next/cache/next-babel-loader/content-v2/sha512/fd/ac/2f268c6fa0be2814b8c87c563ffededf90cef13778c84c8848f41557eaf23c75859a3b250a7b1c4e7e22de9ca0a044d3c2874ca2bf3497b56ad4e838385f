{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/home/erxes/work/erxes-client-portal/client/components/appContext.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect, createContext } from 'react';\nimport { configClientPortal } from \"../pages/api/resolvers/config\";\nimport { sendGraphQLRequest } from \"../pages/api/utils\";\nimport * as queries from \"./knowledgeBase/graphql/queries\";\nimport { useRouter } from 'next/router';\nconst AppContext = /*#__PURE__*/createContext({});\nexport const AppConsumer = AppContext.Consumer;\n\nfunction AppProvider({\n  children\n}) {\n  _s();\n\n  const {\n    0: config,\n    1: setConfig\n  } = useState({});\n  const {\n    0: topic,\n    1: setTopic\n  } = useState({});\n  const router = useRouter();\n  console.log(router);\n  useEffect(() => {\n    const fetchConfig = async () => {\n      const response = await sendGraphQLRequest({\n        query: configClientPortal,\n        name: 'configClientPortal'\n      });\n      setConfig(response);\n    };\n\n    fetchConfig();\n  }, []);\n  useEffect(() => {\n    if (config.knowledgeBaseTopicId) {\n      const fetchTopic = async () => {\n        const response = await sendGraphQLRequest({\n          query: queries.getKbTopicQuery,\n          name: 'widgetsKnowledgeBaseTopicDetail',\n          variables: {\n            _id: config.knowledgeBaseTopicId\n          }\n        });\n        setTopic(response);\n      };\n\n      fetchTopic();\n    }\n  }, [config]);\n  return /*#__PURE__*/_jsxDEV(AppContext.Provider, {\n    value: {\n      config,\n      topic\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 48,\n    columnNumber: 5\n  }, this);\n}\n\n_s(AppProvider, \"ECAaIPm0D1H+yjn583FwWZcRk1w=\", false, function () {\n  return [useRouter];\n});\n\n_c = AppProvider;\nexport default AppProvider;\n\nvar _c;\n\n$RefreshReg$(_c, \"AppProvider\");","map":{"version":3,"sources":["/home/erxes/work/erxes-client-portal/client/components/appContext.tsx"],"names":["React","useState","useEffect","createContext","configClientPortal","sendGraphQLRequest","queries","useRouter","AppContext","AppConsumer","Consumer","AppProvider","children","config","setConfig","topic","setTopic","router","console","log","fetchConfig","response","query","name","knowledgeBaseTopicId","fetchTopic","getKbTopicQuery","variables","_id"],"mappings":";;;;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,EAAqCC,aAArC,QAA0D,OAA1D;AACA,SAASC,kBAAT;AACA,SAASC,kBAAT;AACA,OAAO,KAAKC,OAAZ;AAEA,SAASC,SAAT,QAA0B,aAA1B;AAEA,MAAMC,UAAU,gBAAGL,aAAa,CAAC,EAAD,CAAhC;AAEA,OAAO,MAAMM,WAAW,GAAGD,UAAU,CAACE,QAA/B;;AAEP,SAASC,WAAT,CAAqB;AAAEC,EAAAA;AAAF,CAArB,EAAmC;AAAA;;AACjC,QAAM;AAAA,OAACC,MAAD;AAAA,OAASC;AAAT,MAAsBb,QAAQ,CAAS,EAAT,CAApC;AACA,QAAM;AAAA,OAACc,KAAD;AAAA,OAAQC;AAAR,MAAoBf,QAAQ,CAAC,EAAD,CAAlC;AACA,QAAMgB,MAAM,GAAGV,SAAS,EAAxB;AACAW,EAAAA,OAAO,CAACC,GAAR,CAAYF,MAAZ;AAEAf,EAAAA,SAAS,CAAC,MAAM;AACd,UAAMkB,WAAW,GAAG,YAAY;AAC9B,YAAMC,QAAQ,GAAG,MAAMhB,kBAAkB,CAAC;AACxCiB,QAAAA,KAAK,EAAElB,kBADiC;AAExCmB,QAAAA,IAAI,EAAE;AAFkC,OAAD,CAAzC;AAKAT,MAAAA,SAAS,CAACO,QAAD,CAAT;AACD,KAPD;;AASAD,IAAAA,WAAW;AACZ,GAXQ,EAWN,EAXM,CAAT;AAaAlB,EAAAA,SAAS,CAAC,MAAM;AACd,QAAIW,MAAM,CAACW,oBAAX,EAAiC;AAC/B,YAAMC,UAAU,GAAG,YAAY;AAC7B,cAAMJ,QAAQ,GAAG,MAAMhB,kBAAkB,CAAC;AACxCiB,UAAAA,KAAK,EAAEhB,OAAO,CAACoB,eADyB;AAExCH,UAAAA,IAAI,EAAE,iCAFkC;AAGxCI,UAAAA,SAAS,EAAE;AAAEC,YAAAA,GAAG,EAAEf,MAAM,CAACW;AAAd;AAH6B,SAAD,CAAzC;AAMAR,QAAAA,QAAQ,CAACK,QAAD,CAAR;AACD,OARD;;AAUAI,MAAAA,UAAU;AACX;AACF,GAdQ,EAcN,CAACZ,MAAD,CAdM,CAAT;AAgBA,sBACE,QAAC,UAAD,CAAY,QAAZ;AAAqB,IAAA,KAAK,EAAE;AAAEA,MAAAA,MAAF;AAAUE,MAAAA;AAAV,KAA5B;AAAA,cACGH;AADH;AAAA;AAAA;AAAA;AAAA,UADF;AAKD;;GAxCQD,W;UAGQJ,S;;;KAHRI,W;AA0CT,eAAeA,WAAf","sourcesContent":["import React, { useState, useEffect, createContext } from 'react';\nimport { configClientPortal } from '../pages/api/resolvers/config';\nimport { sendGraphQLRequest } from '../pages/api/utils';\nimport * as queries from './knowledgeBase/graphql/queries';\nimport { Config } from './types';\nimport { useRouter } from 'next/router';\n\nconst AppContext = createContext({});\n\nexport const AppConsumer = AppContext.Consumer;\n\nfunction AppProvider({ children }) {\n  const [config, setConfig] = useState<Config>({});\n  const [topic, setTopic] = useState({});\n  const router = useRouter();\n  console.log(router);\n\n  useEffect(() => {\n    const fetchConfig = async () => {\n      const response = await sendGraphQLRequest({\n        query: configClientPortal,\n        name: 'configClientPortal'\n      });\n\n      setConfig(response);\n    };\n\n    fetchConfig();\n  }, []);\n\n  useEffect(() => {\n    if (config.knowledgeBaseTopicId) {\n      const fetchTopic = async () => {\n        const response = await sendGraphQLRequest({\n          query: queries.getKbTopicQuery,\n          name: 'widgetsKnowledgeBaseTopicDetail',\n          variables: { _id: config.knowledgeBaseTopicId }\n        });\n\n        setTopic(response);\n      };\n\n      fetchTopic();\n    }\n  }, [config]);\n\n  return (\n    <AppContext.Provider value={{ config, topic }}>\n      {children}\n    </AppContext.Provider>\n  );\n}\n\nexport default AppProvider;\n"]},"metadata":{},"sourceType":"module"}