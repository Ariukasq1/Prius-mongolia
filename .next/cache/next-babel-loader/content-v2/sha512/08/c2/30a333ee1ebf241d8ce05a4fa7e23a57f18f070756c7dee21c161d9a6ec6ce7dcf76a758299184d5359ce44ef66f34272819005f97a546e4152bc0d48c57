{"ast":null,"code":"import * as Random from 'meteor-random';\n/*\n * Mongoose field options wrapper\n */\n\nexport const field = options => {\n  const {\n    pkey,\n    type,\n    optional\n  } = options;\n\n  if (type === String && !pkey && !optional) {\n    options.validate = /\\S+/;\n  } // TODO: remove\n\n\n  if (pkey) {\n    options.type = String;\n\n    options.default = () => Random.id();\n  }\n\n  return options;\n};\nexport const schemaWrapper = schema => {\n  schema.add({\n    scopeBrandIds: [String]\n  });\n  return schema;\n};","map":{"version":3,"sources":["/home/erxes/work/erxes-client-portal/client/pages/api/db/models/utils.ts"],"names":["Random","field","options","pkey","type","optional","String","validate","default","id","schemaWrapper","schema","add","scopeBrandIds"],"mappings":"AAAA,OAAO,KAAKA,MAAZ,MAAwB,eAAxB;AAEA;AACA;AACA;;AACA,OAAO,MAAMC,KAAK,GAAGC,OAAO,IAAI;AAC9B,QAAM;AAAEC,IAAAA,IAAF;AAAQC,IAAAA,IAAR;AAAcC,IAAAA;AAAd,MAA2BH,OAAjC;;AAEA,MAAIE,IAAI,KAAKE,MAAT,IAAmB,CAACH,IAApB,IAA4B,CAACE,QAAjC,EAA2C;AACzCH,IAAAA,OAAO,CAACK,QAAR,GAAmB,KAAnB;AACD,GAL6B,CAO9B;;;AACA,MAAIJ,IAAJ,EAAU;AACRD,IAAAA,OAAO,CAACE,IAAR,GAAeE,MAAf;;AACAJ,IAAAA,OAAO,CAACM,OAAR,GAAkB,MAAMR,MAAM,CAACS,EAAP,EAAxB;AACD;;AAED,SAAOP,OAAP;AACD,CAdM;AAgBP,OAAO,MAAMQ,aAAa,GAAGC,MAAM,IAAI;AACrCA,EAAAA,MAAM,CAACC,GAAP,CAAW;AAAEC,IAAAA,aAAa,EAAE,CAACP,MAAD;AAAjB,GAAX;AAEA,SAAOK,MAAP;AACD,CAJM","sourcesContent":["import * as Random from 'meteor-random';\n\n/*\n * Mongoose field options wrapper\n */\nexport const field = options => {\n  const { pkey, type, optional } = options;\n\n  if (type === String && !pkey && !optional) {\n    options.validate = /\\S+/;\n  }\n\n  // TODO: remove\n  if (pkey) {\n    options.type = String;\n    options.default = () => Random.id();\n  }\n\n  return options;\n};\n\nexport const schemaWrapper = schema => {\n  schema.add({ scopeBrandIds: [String] });\n\n  return schema;\n};"]},"metadata":{},"sourceType":"module"}